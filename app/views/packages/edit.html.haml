%h1 Edit Package

.package
  = form_with model: @package, url: package_path(@package.id), method: "patch" do |f|
    .package-fields
      .form-group
        = f.text_field :name
        = f.label :name
    = f.fields_for :disc_packages do |dp|
      .disc
        = dp.hidden_field :disc_id
        .form-group
          = dp.number_field :sequence, in: 1..20, step: 1
          = dp.label :sequence
        .disc_fields
          %span.format
            = dp.object.disc.format
          %span.programs
            = dp.object.disc.programs.map {|p| capsule_program p}.join(', ')
    = f.submit "Edit"

- if @package.errors.any?
  #error_explanation
    %h2
      = pluralize(@package.errors.count, "error") 
      prohibited this series from being saved:
 
    %ul
      - @package.errors.full_messages.each do |msg|
        %li= msg